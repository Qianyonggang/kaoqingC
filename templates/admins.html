{% extends 'base.html' %}
{% block title %}管理员管理{% endblock %}
{% block content %}
<div class="row g-3">
  <div class="col-lg-5">
    <div class="card p-3">
      <h5>新增管理员</h5>
      <form method="post">
        <div class="mb-2"><label class="form-label">用户名</label><input class="form-control" name="username" required></div>
        <div class="mb-2"><label class="form-label">密码</label><input class="form-control" type="password" name="password" required></div>
        <button class="btn btn-primary">创建</button>
      </form>
    </div>
  </div>
  <div class="col-lg-7">
    <div class="card p-3">
      <h5>管理员列表</h5>
      <ul class="list-group">
        {% for item in admins %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span>
              {{ item.username }}
              {% if item.is_owner %}<span class="badge bg-success">创建者</span>{% endif %}
            </span>
            {% if not item.is_owner %}
            <form method="post" action="{{ url_for('admin_delete', user_id=item.id) }}" onsubmit="return confirm('确认删除该管理员及其关联数据吗？');">
              <button class="btn btn-sm btn-outline-danger">删除</button>
            </form>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>
{% endblock %}
